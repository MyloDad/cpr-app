{"ast":null,"code":"import React,{useState,useEffect}from'react';import{RotateCcw}from'lucide-react';import{useAppState}from'../../context/AppStateContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResetButton=()=>{const{resetAllFeatures,refreshTrigger,COLORS}=useAppState();const[showConfirm,setShowConfirm]=useState(false);// Debug effect to monitor when resetAllFeatures changes\nuseEffect(()=>{console.log(\"ResetButton: resetAllFeatures type =\",typeof resetAllFeatures);},[resetAllFeatures]);// Monitor refresh trigger\nuseEffect(()=>{console.log(\"ResetButton: Refresh trigger updated =\",refreshTrigger);},[refreshTrigger]);const handleResetClick=()=>{if(!showConfirm){console.log(\"Step 1: First click - showing confirmation\");setShowConfirm(true);// Auto-hide confirmation after 3 seconds if not clicked\nsetTimeout(()=>{console.log(\"Confirmation timeout - hiding confirmation\");setShowConfirm(false);},3000);}else{console.log(\"Step 2: Confirm click - calling resetAllFeatures\");// Make sure resetAllFeatures is a function before calling it\nif(typeof resetAllFeatures==='function'){try{resetAllFeatures();console.log(\"resetAllFeatures called successfully\");// Force a UI refresh with a DOM update\nsetTimeout(()=>{window.dispatchEvent(new Event('resize'));console.log(\"Window resize event dispatched to force UI update\");},100);}catch(error){console.error(\"Error calling resetAllFeatures:\",error);}}else{console.error(\"resetAllFeatures is not a function:\",resetAllFeatures);}setShowConfirm(false);}};// Add a hard reset option for testing\nconst forceHardReset=()=>{try{// Force page reload - last resort approach\nwindow.location.reload();}catch(e){console.error(\"Error during hard reset:\",e);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleResetClick,style:{position:'fixed',bottom:'20px',right:'20px',borderRadius:'50%',width:'48px',height:'48px',backgroundColor:showConfirm?COLORS.logoRed:COLORS.timerBg,color:COLORS.white,border:'none',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 2px 6px rgba(0,0,0,0.3)',cursor:'pointer',transition:'all 0.2s ease',zIndex:1000},children:[/*#__PURE__*/_jsx(RotateCcw,{size:24}),showConfirm&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'-40px',right:'0',backgroundColor:COLORS.logoRed,color:COLORS.white,padding:'4px 8px',borderRadius:'4px',fontSize:'12px',whiteSpace:'nowrap'},children:\"Tap again to reset all\"})]})});};export default ResetButton;","map":{"version":3,"names":["React","useState","useEffect","RotateCcw","useAppState","jsx","_jsx","jsxs","_jsxs","ResetButton","resetAllFeatures","refreshTrigger","COLORS","showConfirm","setShowConfirm","console","log","handleResetClick","setTimeout","window","dispatchEvent","Event","error","forceHardReset","location","reload","e","children","onClick","style","position","bottom","right","borderRadius","width","height","backgroundColor","logoRed","timerBg","color","white","border","display","alignItems","justifyContent","boxShadow","cursor","transition","zIndex","size","top","padding","fontSize","whiteSpace"],"sources":["/Users/davidhelmers/arrestpro/src/components/Buttons/ResetButton.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { RotateCcw } from 'lucide-react';\nimport { useAppState } from '../../context/AppStateContext';\n\nconst ResetButton = () => {\n  const { resetAllFeatures, refreshTrigger, COLORS } = useAppState();\n  const [showConfirm, setShowConfirm] = useState(false);\n  \n  // Debug effect to monitor when resetAllFeatures changes\n  useEffect(() => {\n    console.log(\"ResetButton: resetAllFeatures type =\", typeof resetAllFeatures);\n  }, [resetAllFeatures]);\n  \n  // Monitor refresh trigger\n  useEffect(() => {\n    console.log(\"ResetButton: Refresh trigger updated =\", refreshTrigger);\n  }, [refreshTrigger]);\n  \n  const handleResetClick = () => {\n    if (!showConfirm) {\n      console.log(\"Step 1: First click - showing confirmation\");\n      setShowConfirm(true);\n      // Auto-hide confirmation after 3 seconds if not clicked\n      setTimeout(() => {\n        console.log(\"Confirmation timeout - hiding confirmation\");\n        setShowConfirm(false);\n      }, 3000);\n    } else {\n      console.log(\"Step 2: Confirm click - calling resetAllFeatures\");\n      \n      // Make sure resetAllFeatures is a function before calling it\n      if (typeof resetAllFeatures === 'function') {\n        try {\n          resetAllFeatures();\n          console.log(\"resetAllFeatures called successfully\");\n          \n          // Force a UI refresh with a DOM update\n          setTimeout(() => {\n            window.dispatchEvent(new Event('resize'));\n            console.log(\"Window resize event dispatched to force UI update\");\n          }, 100);\n        } catch (error) {\n          console.error(\"Error calling resetAllFeatures:\", error);\n        }\n      } else {\n        console.error(\"resetAllFeatures is not a function:\", resetAllFeatures);\n      }\n      \n      setShowConfirm(false);\n    }\n  };\n\n  // Add a hard reset option for testing\n  const forceHardReset = () => {\n    try {\n      // Force page reload - last resort approach\n      window.location.reload();\n    } catch (e) {\n      console.error(\"Error during hard reset:\", e);\n    }\n  };\n\n  return (\n    <div>\n      <button\n        onClick={handleResetClick}\n        style={{\n          position: 'fixed',\n          bottom: '20px',\n          right: '20px',\n          borderRadius: '50%',\n          width: '48px',\n          height: '48px',\n          backgroundColor: showConfirm ? COLORS.logoRed : COLORS.timerBg,\n          color: COLORS.white,\n          border: 'none',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          boxShadow: '0 2px 6px rgba(0,0,0,0.3)',\n          cursor: 'pointer',\n          transition: 'all 0.2s ease',\n          zIndex: 1000\n        }}\n      >\n        <RotateCcw size={24} />\n        {showConfirm && (\n          <div\n            style={{\n              position: 'absolute',\n              top: '-40px',\n              right: '0',\n              backgroundColor: COLORS.logoRed,\n              color: COLORS.white,\n              padding: '4px 8px',\n              borderRadius: '4px',\n              fontSize: '12px',\n              whiteSpace: 'nowrap'\n            }}\n          >\n            Tap again to reset all\n          </div>\n        )}\n      </button>\n      \n      {/* Hidden emergency reset button - only show in development */}\n\n    </div>\n  );\n};\n\nexport default ResetButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}