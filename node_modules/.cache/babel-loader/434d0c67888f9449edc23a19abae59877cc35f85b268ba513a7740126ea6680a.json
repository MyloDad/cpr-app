{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useRef, useCallback, useEffect } from 'react';\nimport { Capacitor } from '@capacitor/core';\nimport { NativeAudio } from '@capacitor-community/native-audio';\nconst CLICK_VOLUME = 0.5;\nconst VOICE_VOLUME = 1.0;\nconst useNativeAudio = () => {\n  _s();\n  const initialized = useRef(false);\n  const audioMap = useRef({});\n  const isNative = Capacitor.isNativePlatform();\n  const isIOS = Capacitor.getPlatform() === 'ios';\n\n  // ðŸŽ¯ ADD: Web AudioContext for better timing (only for metronome)\n  const audioContext = useRef(null);\n  const clickBuffer = useRef(null);\n  const initAudio = useCallback(async (id, src, poolSize = 1) => {\n    if (audioMap.current[id]) return;\n    try {\n      if (isNative) {\n        const assetId = id;\n        const volume = src.includes('click.mp3') ? CLICK_VOLUME : VOICE_VOLUME;\n        await NativeAudio.preload({\n          assetId,\n          assetPath: src,\n          volume,\n          isUrl: false\n        });\n        audioMap.current[id] = {\n          id: assetId,\n          native: true,\n          volume\n        };\n      } else {\n        if (id === 'metronome') {\n          // ðŸŽ¯ Special handling for web metronome: load into AudioContext\n          if (!audioContext.current) {\n            audioContext.current = new (window.AudioContext || window.webkitAudioContext)();\n          }\n          const response = await fetch(src);\n          const arrayBuffer = await response.arrayBuffer();\n          const decodedBuffer = await audioContext.current.decodeAudioData(arrayBuffer);\n          clickBuffer.current = decodedBuffer;\n          audioMap.current[id] = {\n            buffer: decodedBuffer,\n            native: false // web\n          };\n        } else {\n          // Normal voice files\n          const audioPool = Array(poolSize).fill(null).map(() => {\n            const audio = new Audio(src);\n            audio.preload = 'auto';\n            audio.volume = VOICE_VOLUME;\n            return audio;\n          });\n          audioMap.current[id] = {\n            pool: audioPool,\n            currentIndex: 0,\n            native: false,\n            volume: VOICE_VOLUME\n          };\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to initialize audio: ${id}`, error);\n    }\n  }, [isNative]);\n  const playSound = useCallback(async id => {\n    const audio = audioMap.current[id];\n    if (!audio) {\n      console.warn(`Audio not found: ${id}`);\n      return null;\n    }\n    try {\n      if (isNative) {\n        await NativeAudio.play({\n          assetId: audio.id,\n          time: 0\n        });\n        return {\n          id: audio.id\n        };\n      } else {\n        if (id === 'metronome' && clickBuffer.current && audioContext.current) {\n          // ðŸŽ¯ Play click via AudioContext for perfect timing\n          console.log('Playing metronome click via AudioContext');\n          const source = audioContext.current.createBufferSource();\n          source.buffer = clickBuffer.current;\n          const gainNode = audioContext.current.createGain();\n          gainNode.gain.value = CLICK_VOLUME;\n          source.connect(gainNode).connect(audioContext.current.destination);\n          source.start(0);\n          return source;\n        } else {\n          const pool = audio.pool;\n          const currentIndex = audio.currentIndex;\n          const element = pool[currentIndex];\n          if (!element.paused) {\n            element.pause();\n            element.currentTime = 0;\n          }\n          element.play().catch(e => console.warn('Audio play prevented:', e));\n          audio.currentIndex = (currentIndex + 1) % pool.length;\n          return element;\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to play sound: ${id}`, error);\n      return null;\n    }\n  }, []);\n  const stopSound = useCallback(async id => {\n    const audio = audioMap.current[id];\n    if (!audio) return;\n    try {\n      if (audio.native) {\n        await NativeAudio.stop({\n          assetId: audio.id\n        });\n      } else {\n        if (id === 'metronome') {\n          // Nothing to stop for AudioContext click\n          return;\n        }\n        audio.pool.forEach(element => {\n          element.pause();\n          element.currentTime = 0;\n        });\n      }\n    } catch (error) {\n      console.error(`Failed to stop sound: ${id}`, error);\n    }\n  }, []);\n  const setVolume = useCallback(async (id, volume) => {\n    const audio = audioMap.current[id];\n    if (!audio) return;\n    try {\n      if (audio.native) {\n        await NativeAudio.setVolume({\n          assetId: audio.id,\n          volume\n        });\n        audio.volume = volume;\n      } else {\n        if (id !== 'metronome') {\n          audio.pool.forEach(element => {\n            element.volume = volume;\n          });\n          audio.volume = volume;\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to set volume for ${id}`, error);\n    }\n  }, []);\n  const unlockAudio = useCallback(() => {\n    if (isNative) return;\n    if (audioContext.current && audioContext.current.state === 'suspended') {\n      audioContext.current.resume();\n    }\n    const silentSound = new Audio();\n    silentSound.play().catch(e => console.warn('Silent sound play prevented:', e));\n    Object.values(audioMap.current).forEach(audio => {\n      if (!audio.native && audio.pool && audio.pool.length > 0) {\n        const element = audio.pool[0];\n        const originalVolume = element.volume;\n        element.volume = 0;\n        element.play().then(() => {\n          element.pause();\n          element.currentTime = 0;\n          element.volume = originalVolume;\n        }).catch(e => console.warn('Audio unlock failed:', e));\n      }\n    });\n  }, [isNative]);\n  const releaseResources = useCallback(async () => {\n    try {\n      if (isNative) {\n        for (const id in audioMap.current) {\n          if (audioMap.current[id].native) {\n            await NativeAudio.unload({\n              assetId: audioMap.current[id].id\n            });\n          }\n        }\n      } else {\n        for (const id in audioMap.current) {\n          if (!audioMap.current[id].native && audioMap.current[id].pool) {\n            audioMap.current[id].pool.forEach(element => {\n              element.pause();\n              element.src = '';\n            });\n          }\n        }\n      }\n      audioMap.current = {};\n      initialized.current = false;\n      if (audioContext.current) {\n        audioContext.current.close();\n        audioContext.current = null;\n      }\n    } catch (error) {\n      console.error('Failed to release audio resources', error);\n    }\n  }, [isNative]);\n  useEffect(() => {\n    if (initialized.current) return;\n    const initializeAudio = async () => {\n      initialized.current = true;\n    };\n    initializeAudio();\n    return () => {\n      releaseResources();\n    };\n  }, [releaseResources]);\n  return {\n    initAudio,\n    playSound,\n    stopSound,\n    setVolume,\n    unlockAudio,\n    releaseResources,\n    isNative\n  };\n};\n_s(useNativeAudio, \"0HstSJbW+LyqacmycU9E6TtoRpg=\");\nexport default useNativeAudio;","map":{"version":3,"names":["useRef","useCallback","useEffect","Capacitor","NativeAudio","CLICK_VOLUME","VOICE_VOLUME","useNativeAudio","_s","initialized","audioMap","isNative","isNativePlatform","isIOS","getPlatform","audioContext","clickBuffer","initAudio","id","src","poolSize","current","assetId","volume","includes","preload","assetPath","isUrl","native","window","AudioContext","webkitAudioContext","response","fetch","arrayBuffer","decodedBuffer","decodeAudioData","buffer","audioPool","Array","fill","map","audio","Audio","pool","currentIndex","error","console","playSound","warn","play","time","log","source","createBufferSource","gainNode","createGain","gain","value","connect","destination","start","element","paused","pause","currentTime","catch","e","length","stopSound","stop","forEach","setVolume","unlockAudio","state","resume","silentSound","Object","values","originalVolume","then","releaseResources","unload","close","initializeAudio"],"sources":["/Users/davidhelmers/arrestpro/src/hooks/useNativeAudio.js"],"sourcesContent":["import { useRef, useCallback, useEffect } from 'react';\nimport { Capacitor } from '@capacitor/core';\nimport { NativeAudio } from '@capacitor-community/native-audio';\n\nconst CLICK_VOLUME = 0.5;\nconst VOICE_VOLUME = 1.0;\n\nconst useNativeAudio = () => {\n  const initialized = useRef(false);\n  const audioMap = useRef({});\n  \n  const isNative = Capacitor.isNativePlatform();\n  const isIOS = Capacitor.getPlatform() === 'ios';\n\n  // ðŸŽ¯ ADD: Web AudioContext for better timing (only for metronome)\n  const audioContext = useRef(null);\n  const clickBuffer = useRef(null);\n\n  const initAudio = useCallback(async (id, src, poolSize = 1) => {\n    if (audioMap.current[id]) return;\n\n    try {\n      if (isNative) {\n        const assetId = id;\n        const volume = src.includes('click.mp3') ? CLICK_VOLUME : VOICE_VOLUME;\n\n        await NativeAudio.preload({\n          assetId,\n          assetPath: src,\n          volume,\n          isUrl: false,\n        });\n\n        audioMap.current[id] = { id: assetId, native: true, volume };\n      } else {\n        if (id === 'metronome') {\n          // ðŸŽ¯ Special handling for web metronome: load into AudioContext\n          if (!audioContext.current) {\n            audioContext.current = new (window.AudioContext || window.webkitAudioContext)();\n          }\n\n          const response = await fetch(src);\n          const arrayBuffer = await response.arrayBuffer();\n          const decodedBuffer = await audioContext.current.decodeAudioData(arrayBuffer);\n\n          clickBuffer.current = decodedBuffer;\n\n          audioMap.current[id] = { \n            buffer: decodedBuffer,\n            native: false, // web\n          };\n          \n\n\n\n        } else {\n          // Normal voice files\n          const audioPool = Array(poolSize).fill(null).map(() => {\n            const audio = new Audio(src);\n            audio.preload = 'auto';\n            audio.volume = VOICE_VOLUME;\n            return audio;\n          });\n\n          audioMap.current[id] = { pool: audioPool, currentIndex: 0, native: false, volume: VOICE_VOLUME };\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to initialize audio: ${id}`, error);\n    }\n  }, [isNative]);\n\n  const playSound = useCallback(async (id) => {\n    const audio = audioMap.current[id];\n    if (!audio) {\n      console.warn(`Audio not found: ${id}`);\n      return null;\n    }\n\n    try {\n      if (isNative) {\n        await NativeAudio.play({ assetId: audio.id, time: 0 });\n        return { id: audio.id };\n      } else {\n        if (id === 'metronome' && clickBuffer.current && audioContext.current) {\n          // ðŸŽ¯ Play click via AudioContext for perfect timing\n          console.log('Playing metronome click via AudioContext');\n\n          const source = audioContext.current.createBufferSource();\n          source.buffer = clickBuffer.current;\n          const gainNode = audioContext.current.createGain();\n          gainNode.gain.value = CLICK_VOLUME;\n\n          source.connect(gainNode).connect(audioContext.current.destination);\n          source.start(0);\n          return source;\n        } else {\n          const pool = audio.pool;\n          const currentIndex = audio.currentIndex;\n          const element = pool[currentIndex];\n\n          if (!element.paused) {\n            element.pause();\n            element.currentTime = 0;\n          }\n\n          element.play().catch(e => console.warn('Audio play prevented:', e));\n          audio.currentIndex = (currentIndex + 1) % pool.length;\n\n          return element;\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to play sound: ${id}`, error);\n      return null;\n    }\n  }, []);\n\n  const stopSound = useCallback(async (id) => {\n    const audio = audioMap.current[id];\n    if (!audio) return;\n\n    try {\n      if (audio.native) {\n        await NativeAudio.stop({ assetId: audio.id });\n      } else {\n        if (id === 'metronome') {\n          // Nothing to stop for AudioContext click\n          return;\n        }\n        audio.pool.forEach(element => {\n          element.pause();\n          element.currentTime = 0;\n        });\n      }\n    } catch (error) {\n      console.error(`Failed to stop sound: ${id}`, error);\n    }\n  }, []);\n\n  const setVolume = useCallback(async (id, volume) => {\n    const audio = audioMap.current[id];\n    if (!audio) return;\n\n    try {\n      if (audio.native) {\n        await NativeAudio.setVolume({ assetId: audio.id, volume });\n        audio.volume = volume;\n      } else {\n        if (id !== 'metronome') {\n          audio.pool.forEach(element => { element.volume = volume; });\n          audio.volume = volume;\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to set volume for ${id}`, error);\n    }\n  }, []);\n\n  const unlockAudio = useCallback(() => {\n    if (isNative) return;\n    \n    if (audioContext.current && audioContext.current.state === 'suspended') {\n      audioContext.current.resume();\n    }\n\n    const silentSound = new Audio();\n    silentSound.play().catch(e => console.warn('Silent sound play prevented:', e));\n\n    Object.values(audioMap.current).forEach(audio => {\n      if (!audio.native && audio.pool && audio.pool.length > 0) {\n        const element = audio.pool[0];\n        const originalVolume = element.volume;\n        element.volume = 0;\n        element.play()\n          .then(() => {\n            element.pause();\n            element.currentTime = 0;\n            element.volume = originalVolume;\n          })\n          .catch(e => console.warn('Audio unlock failed:', e));\n      }\n    });\n  }, [isNative]);\n\n  const releaseResources = useCallback(async () => {\n    try {\n      if (isNative) {\n        for (const id in audioMap.current) {\n          if (audioMap.current[id].native) {\n            await NativeAudio.unload({ assetId: audioMap.current[id].id });\n          }\n        }\n      } else {\n        for (const id in audioMap.current) {\n          if (!audioMap.current[id].native && audioMap.current[id].pool) {\n            audioMap.current[id].pool.forEach(element => {\n              element.pause();\n              element.src = '';\n            });\n          }\n        }\n      }\n      \n      audioMap.current = {};\n      initialized.current = false;\n\n      if (audioContext.current) {\n        audioContext.current.close();\n        audioContext.current = null;\n      }\n    } catch (error) {\n      console.error('Failed to release audio resources', error);\n    }\n  }, [isNative]);\n\n  useEffect(() => {\n    if (initialized.current) return;\n\n    const initializeAudio = async () => {\n      initialized.current = true;\n    };\n\n    initializeAudio();\n    return () => { releaseResources(); };\n  }, [releaseResources]);\n\n  return {\n    initAudio,\n    playSound,\n    stopSound,\n    setVolume,\n    unlockAudio,\n    releaseResources,\n    isNative,\n  };\n};\n\nexport default useNativeAudio;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}